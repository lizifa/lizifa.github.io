System.register(["./index-legacy-2e8ca4e3.js"],(function(t,e){"use strict";var i,s,h,a,o,n,r,l,d,c,m,u,p,g,f,x;return{setters:[t=>{i=t._,s=t.o,h=t.d,a=t.F,o=t.e,n=t.p,r=t.q,l=t.s,d=t.v,c=t.k,m=t.g,u=t.r,p=t.a,g=t.l,f=t.w,x=t.b}],execute:function(){var e=document.createElement("style");function b(t){return"function"==typeof t||"[object Function]"===Object.prototype.toString.call(t)}function y(t,e,i,s=1){return[Math.round(e/s/t[0])*t[0],Math.round(i/s/t[1])*t[1]]}function w(t,e,i){return t-e-i}function v(t,e,i){return t-e-i}function M(t,e,i){return null!==e&&t<e?e:null!==i&&i<t?i:t}function z(t,e,i,s,h){const a=Math.PI/180*h,o=Math.cos(a),n=Math.sin(a);let r=i-t,l=s-e;return{x:r*o-l*n+t,y:r*n+l*o+e}}function k(t,e,i){let s=t;const h=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find((t=>b(s[t])));if(!b(s[h]))return!1;do{if(s[h](e))return!0;if(s===i)return!1;s=s.parentNode}while(s);return!1}function R(t,e,i){t&&(t.attachEvent?t.attachEvent("on"+e,i):t.addEventListener?t.addEventListener(e,i,!0):t["on"+e]=i)}function T(t,e,i){t&&(t.detachEvent?t.detachEvent("on"+e,i):t.removeEventListener?t.removeEventListener(e,i,!0):t["on"+e]=null)}e.textContent='.vdr[data-v-a7d3ae59]{touch-action:none;position:absolute;box-sizing:border-box;border:1px dashed}.handle[data-v-a7d3ae59]{box-sizing:border-box;position:absolute;background:#ffffff;border:1px solid #333;border-radius:50%}.handle-tl[data-v-a7d3ae59]{cursor:nw-resize}.handle-tm[data-v-a7d3ae59]{cursor:n-resize}.handle-tr[data-v-a7d3ae59]{cursor:ne-resize}.handle-ml[data-v-a7d3ae59]{cursor:w-resize}.handle-mr[data-v-a7d3ae59]{cursor:e-resize}.handle-bl[data-v-a7d3ae59]{cursor:sw-resize}.handle-bm[data-v-a7d3ae59]{cursor:s-resize}.handle-br[data-v-a7d3ae59]{cursor:se-resize}.handle-rot[data-v-a7d3ae59]{transform:translate(-50%);cursor:grab;display:inline-block;box-sizing:border-box;border:none;text-indent:-9999px;vertical-align:middle}.handle-rot[data-v-a7d3ae59]:before,.handle-rot[data-v-a7d3ae59]:after{content:"";box-sizing:inherit;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}.handle-rot[data-v-a7d3ae59]:before{width:1em;height:1em;border:2px solid #333;border-right-color:transparent;border-radius:50%}.handle-rot[data-v-a7d3ae59]:after{width:0px;height:0px;border:.25em solid #333;border-left-color:transparent;border-top-color:transparent;left:100%;top:10%}.screen-editor{background-color:#d0cfd8;min-height:100vh;display:flex;justify-content:center;align-items:center;position:relative}.screen-editor .asider{height:100vh;background-color:#fff;width:300px;display:flex}.screen-editor .asider .ul{width:50px;height:100%;border-right:1px solid rgba(60,10,30,.04);list-style:none}.screen-editor .asider .ul li{height:50px;display:flex;justify-content:center;align-items:center;font-size:14px;font-weight:700;cursor:pointer}.screen-editor .el-tabs{flex:1;box-sizing:border-box;padding:0 10px}.screen-editor .config{height:100vh;background-color:#fff;width:300px}.screen-editor .container1{width:414px;height:896px;background-color:#fff;margin:0 auto;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%;background-repeat:repeat;transform:scale(.8)}\n',document.head.appendChild(e);const S={start:"mousedown",move:"mousemove",stop:"mouseup"},H={start:"touchstart",move:"touchmove",stop:"touchend"},L={userSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",MsUserSelect:"none"},N={userSelect:"auto",MozUserSelect:"auto",WebkitUserSelect:"auto",MsUserSelect:"auto"};let C=S;const W={replace:!0,name:"Element",props:{className:{type:String,default:"vdr"},classNameDraggable:{type:String,default:"draggable"},classNameResizable:{type:String,default:"resizable"},classNameRotatable:{type:String,default:"rotatable"},classNameDragging:{type:String,default:"dragging"},classNameResizing:{type:String,default:"resizing"},classNameRotating:{type:String,default:"rotating"},classNameActive:{type:String,default:"active"},classNameHandle:{type:String,default:"handle"},disableUserSelect:{type:Boolean,default:!0},enableNativeDrag:{type:Boolean,default:!1},preventDeactivation:{type:Boolean,default:!1},active:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},rotatable:{type:Boolean,default:!1},lockAspectRatio:{type:Boolean,default:!1},outsideAspectRatio:{type:[Number,String],default:0},w:{type:[Number,String],default:414,validator:t=>"number"==typeof t?t>0:"auto"===t},h:{type:[Number,String],default:100,validator:t=>"number"==typeof t?t>0:"auto"===t},minWidth:{type:Number,default:0,validator:t=>t>=0},minHeight:{type:Number,default:0,validator:t=>t>=0},maxWidth:{type:Number,default:1/0,validator:t=>t>=0},maxHeight:{type:Number,default:1/0,validator:t=>t>=0},x:{type:[String,Number],default:0},y:{type:[String,Number],default:0},z:{type:[String,Number],default:"auto",validator:t=>"string"==typeof t?"auto"===t:t>=0},r:{type:[String,Number],default:0},handles:{type:Array,default:()=>["tl","tm","tr","mr","br","bm","bl","ml","rot"],validator:t=>{const e=new Set(["tl","tm","tr","mr","br","bm","bl","ml","rot"]);return new Set(t.filter((t=>e.has(t)))).size===t.length}},dragHandle:{type:String,default:null},dragCancel:{type:String,default:null},axis:{type:String,default:"both",validator:t=>["x","y","both"].includes(t)},grid:{type:Array,default:()=>[1,1]},parent:{type:[Boolean,String],default:!1},onDragStart:{type:Function,default:()=>!0},onDrag:{type:Function,default:()=>!0},onResizeStart:{type:Function,default:()=>!0},onResize:{type:Function,default:()=>!0},onRotateStart:{type:Function,default:()=>!0},onRotate:{type:Function,default:()=>!0},isConflictCheck:{type:Boolean,default:!1},snap:{type:Boolean,default:!1},snapBorder:{type:Boolean,default:!1},snapTolerance:{type:Number,default:5,validator:function(t){return"number"==typeof t}},scaleRatio:{type:Number,default:1,validator:t=>"number"==typeof t},handleInfo:{type:Object,default:()=>({size:8,offset:-4,switch:!0})}},data(){return{left:this.x,top:this.y,right:null,bottom:null,rotate:this.r,width:null,height:null,widthTouched:!1,heightTouched:!1,aspectFactor:null,parentWidth:null,parentHeight:null,minW:this.minWidth,minH:this.minHeight,maxW:this.maxWidth,maxH:this.maxHeight,handle:null,enabled:this.active,resizing:!1,dragging:!1,rotating:!1,zIndex:this.z,lastCenterX:0,lastCenterY:0,parentX:0,parentY:0}},computed:{handleStyle(){return t=>{if(!this.handleInfo.switch)return{display:this.enabled?"block":"none"};if("rot"===t&&!this.rotatable)return{display:"none"};if("rot"!==t&&!this.resizable)return{display:"none"};const e=(this.handleInfo.size/this.scaleRatio).toFixed(2),i=(this.handleInfo.offset/this.scaleRatio).toFixed(2),s=(e/2).toFixed(2),h={tl:{top:`${i}px`,left:`${i}px`},tm:{top:`${i}px`,left:`calc(50% - ${s}px)`},tr:{top:`${i}px`,right:`${i}px`},mr:{top:`calc(50% - ${s}px)`,right:`${i}px`},br:{bottom:`${i}px`,right:`${i}px`},bm:{bottom:`${i}px`,right:`calc(50% - ${s}px)`},bl:{bottom:`${i}px`,left:`${i}px`},ml:{top:`calc(50% - ${s}px)`,left:`${i}px`},rot:{top:`-${3*e}px`,left:"50%"}},a={width:h[t].width||`${e}px`,height:h[t].height||`${e}px`,top:h[t].top,left:h[t].left,right:h[t].right,bottom:h[t].bottom},o={tl:0,tm:1,tr:2,mr:3,br:4,bm:5,bl:6,ml:7,rot:8};if("rot"!==t){const e=["nw-resize","n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize"],i=45,s=this.rotate+i/2,h=Math.floor(s/i);let n=(o[t]+h)%8;a.cursor=e[n]}return a.display=this.enabled?"block":"none",a}},style(){return{background:"#f00",transform:`translate(${this.left}px, ${this.top}px) rotate(${this.rotate}deg)`,width:this.computedWidth,height:this.computedHeight,zIndex:this.zIndex,fontSize:2*this.handleInfo.size+"px",...this.dragging&&this.disableUserSelect?L:N}},actualHandles(){return this.resizable||this.rotatable?this.handles:[]},computedWidth(){return"auto"!==this.w||this.widthTouched?this.width+"px":"auto"},computedHeight(){return"auto"!==this.h||this.heightTouched?this.height+"px":"auto"}},watch:{active(t){this.enabled=t,t?(this.updateParentSize(),this.$emit("activated")):this.$emit("deactivated")},x(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcDragLimits()),this.moveHorizontally(t))},y(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcDragLimits()),this.moveVertically(t))},z(t){(t>=0||"auto"===t)&&(this.zIndex=t)},r(t){t>=0&&(this.rotate=t%360)},lockAspectRatio(t){t?this.outsideAspectRatio?this.aspectFactor=this.outsideAspectRatio:this.aspectFactor=this.width/this.height:this.aspectFactor=void 0},outsideAspectRatio(t){t&&(this.aspectFactor=t)},minWidth(t){t>0&&t<=this.width&&(this.minW=t)},minHeight(t){t>0&&t<=this.height&&(this.minH=t)},maxWidth(t){this.maxW=t},maxHeight(t){this.maxH=t},w(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcResizeLimits()),this.changeWidth(t))},h(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcResizeLimits()),this.changeHeight(t))}},created(){this.maxWidth&&this.minWidth>this.maxWidth&&console.warn("[Vdr warn]: Invalid prop: minWidth cannot be greater than maxWidth"),this.maxWidth&&this.minHeight>this.maxHeight&&console.warn("[Vdr warn]: Invalid prop: minHeight cannot be greater than maxHeight"),this.elmX=0,this.elmY=0,this.elmW=0,this.elmH=0,this.lastCenterX=0,this.lastCenterY=0,this.fixedXName="",this.fixedYName="",this.fixedX=0,this.fixedY=0,this.TL={},this.TR={},this.BL={},this.BR={},this.resetBoundsAndMouseState()},mounted(){this.enableNativeDrag||(this.$el.ondragstart=()=>!1);const[t,e]=this.getParentSize();this.parentWidth=t,this.parentHeight=e;const[i,s]=function(t){const e=window.getComputedStyle(t);return[parseFloat(e.getPropertyValue("width"),10),parseFloat(e.getPropertyValue("height"),10)]}(this.$el);this.aspectFactor=("auto"!==this.w?this.w:i)/("auto"!==this.h?this.h:s),this.outsideAspectRatio&&(this.aspectFactor=this.outsideAspectRatio),this.width="auto"!==this.w?this.w:i,this.height="auto"!==this.h?this.h:s,this.right=this.parentWidth-this.width-this.left,this.bottom=this.parentHeight-this.height-this.top,this.settingAttribute(),R(document.documentElement,"mousedown",this.deselect),R(document.documentElement,"touchend touchcancel",this.deselect),R(window,"resize",this.checkParentSize)},beforeDestroy(){T(document.documentElement,"mousedown",this.deselect),T(document.documentElement,"touchstart",this.handleUp),T(document.documentElement,"mousemove",this.move),T(document.documentElement,"touchmove",this.move),T(document.documentElement,"mouseup",this.handleUp),T(document.documentElement,"touchend touchcancel",this.deselect),T(window,"resize",this.checkParentSize)},methods:{resetBoundsAndMouseState(){this.mouseClickPosition={mouseX:0,mouseY:0,x:0,y:0,w:0,h:0},this.bounds={minLeft:null,maxLeft:null,minRight:null,maxRight:null,minTop:null,maxTop:null,minBottom:null,maxBottom:null}},checkParentSize(){if(this.parent){const[t,e]=this.getParentSize();this.right=t-this.width-this.left,this.bottom=e-this.height-this.top,this.parentWidth=t,this.parentHeight=e}},updateParentSize(){const[t,e]=this.getParentSize();this.parentWidth=t,this.parentHeight=e},getParentSize(){if(!0===this.parent){const t=window.getComputedStyle(this.$el.parentNode,null),e=this.$el.parentNode.getBoundingClientRect();return this.parentX=e.x,this.parentY=e.y,[Math.round(parseFloat(t.getPropertyValue("width"),10)),Math.round(parseFloat(t.getPropertyValue("height"),10))]}if("string"==typeof this.parent){const t=document.querySelector(this.parent);if(!(t instanceof HTMLElement))throw new Error(`The selector ${this.parent} does not match any element`);return[t.offsetWidth,t.offsetHeight]}return[null,null]},elementTouchDown(t){C=H,this.elementDown(t)},elementMouseDown(t){C=S,this.elementDown(t)},elementDown(t){if(t instanceof MouseEvent&&1!==t.which)return;const e=t.target||t.srcElement;if(this.$el.contains(e)){if(!1===this.onDragStart(t))return;if(this.dragHandle&&!k(e,this.dragHandle,this.$el)||this.dragCancel&&k(e,this.dragCancel,this.$el))return void(this.dragging=!1);this.enabled||(this.enabled=!0,this.$emit("activated"),this.$emit("update:active",!0)),this.draggable&&(this.dragging=!0),this.mouseClickPosition.mouseX=t.touches?t.touches[0].pageX:t.pageX,this.mouseClickPosition.mouseY=t.touches?t.touches[0].pageY:t.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.mouseClickPosition.width=this.width,this.mouseClickPosition.height=this.height,this.parent&&(this.bounds=this.calcDragLimits()),R(document.documentElement,C.move,this.move),R(document.documentElement,C.stop,this.handleUp)}},calcDragLimits(){return this.rotatable?{minLeft:-this.width/2,maxLeft:this.parentWidth-this.width/2,minRight:this.width/2,maxRight:this.parentWidth+this.width/2,minTop:-this.height/2,maxTop:this.parentHeight-this.height/2,minBottom:this.height/2,maxBottom:this.parentHeight+this.height/2}:{minLeft:this.left%this.grid[0],maxLeft:Math.floor((this.parentWidth-this.width-this.left)/this.grid[0])*this.grid[0]+this.left,minRight:this.right%this.grid[0],maxRight:Math.floor((this.parentWidth-this.width-this.right)/this.grid[0])*this.grid[0]+this.right,minTop:this.top%this.grid[1],maxTop:Math.floor((this.parentHeight-this.height-this.top)/this.grid[1])*this.grid[1]+this.top,minBottom:this.bottom%this.grid[1],maxBottom:Math.floor((this.parentHeight-this.height-this.bottom)/this.grid[1])*this.grid[1]+this.bottom}},deselect(t){const e=t.target||t.srcElement,i=new RegExp(this.className+"-([trmbl]{2})","");this.$el.contains(e)||i.test(e.className)||(this.enabled&&!this.preventDeactivation&&(this.enabled=!1,this.$emit("deactivated"),this.$emit("update:active",!1)),T(document.documentElement,C.move,this.move)),this.resetBoundsAndMouseState()},handleTouchDown(t,e){C=H,this.handleDown(t,e)},handleDown(t,e){if(e instanceof MouseEvent&&1!==e.which)return!1;if(!1===this.onResizeStart(t,e))return!1;e.stopPropagation&&e.stopPropagation(),this.handle=t,"rot"===this.handle?this.rotating=!0:this.resizing=!0;let{top:i,left:s,width:h,height:a}=this.$el.getBoundingClientRect();this.lastCenterX=window.pageXOffset+s+h/2,this.lastCenterY=window.pageYOffset+i+a/2;let o=this.left,n=this.top,r=this.width,l=this.height,d=o+r/2,c=n+l/2,m=this.rotate;this.TL=z(d,c,o,n,m),this.TR=z(d,c,o+r,n,m),this.BL=z(d,c,o,n+l,m),this.BR=z(d,c,o+r,n+l,m),this.mouseClickPosition.mouseX=e.touches?e.touches[0].pageX:e.pageX,this.mouseClickPosition.mouseY=e.touches?e.touches[0].pageY:e.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.mouseClickPosition.width=this.width,this.mouseClickPosition.height=this.height,this.bounds=this.calcResizeLimits(),R(document.documentElement,C.move,this.move),R(document.documentElement,C.stop,this.handleUp)},calcResizeLimits(){let t=this.minW,e=this.minH,i=this.maxW,s=this.maxH;const[h,a]=this.grid,o=this.width,n=this.height,r=this.left,l=this.top,d=this.right,c=this.bottom;i-=i%h,s-=s%a;const m={minLeft:null,maxLeft:null,minTop:null,maxTop:null,minRight:null,maxRight:null,minBottom:null,maxBottom:null};return this.parent?(m.minLeft=r,m.maxLeft=r+Math.floor((o-t)/h),m.minTop=l,m.maxTop=l+Math.floor((n-e)/a),m.minRight=d,m.maxRight=d+Math.floor((o-t)/h),m.minBottom=c,m.maxBottom=c+Math.floor((n-e)/a),i&&(m.minLeft=Math.max(m.minLeft,this.parentWidth-d-i),m.minRight=Math.max(m.minRight,this.parentWidth-r-i)),s&&(m.minTop=Math.max(m.minTop,this.parentHeight-c-s),m.minBottom=Math.max(m.minBottom,this.parentHeight-l-s))):(m.minLeft=null,m.maxLeft=r+Math.floor(o-t),m.minTop=null,m.maxTop=l+Math.floor(n-e),m.minRight=null,m.maxRight=d+Math.floor(o-t),m.minBottom=null,m.maxBottom=c+Math.floor(n-e),i&&(m.minLeft=-(d+i),m.minRight=-(r+i)),s&&(m.minTop=-(c+s),m.minBottom=-(l+s)),this.lockAspectRatio&&i&&s&&(m.minLeft=Math.min(m.minLeft,-(d+i)),m.minTop=Math.min(m.minTop,-(s+c)),m.minRight=Math.min(m.minRight,-r-i),m.minBottom=Math.min(m.minBottom,-l-s))),m},move(t){this.resizing?this.handleResize(t):this.dragging?this.handleDrag(t):this.rotating&&this.handleRotate(t)},getMouseCoordinate:t=>-1!==t.type.indexOf("touch")?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:{x:t.pageX||t.clientX+document.documentElement.scrollLeft,y:t.pageY||t.clientY+document.documentElement.scrollTop},handleRotate(t){const{x:e,y:i}=this.getMouseCoordinate(t),s=e-this.lastCenterX,h=i-this.lastCenterY;this.rotate=(function(t,e){let i=Math.atan2(e,t);return i=Math.round(180/Math.PI*i),i<0&&(i=360+i),i}(s,h)+90)%360,this.$emit("rotating",this.rotate)},async handleDrag(t){const e=this.axis,i=this.grid,s=this.bounds,h=this.mouseClickPosition,a=e&&"y"!==e?h.mouseX-(t.touches?t.touches[0].pageX:t.pageX):0,o=e&&"x"!==e?h.mouseY-(t.touches?t.touches[0].pageY:t.pageY):0,[n,r]=y(i,a,o,this.scaleRatio),l=M(h.left-n,s.minLeft,s.maxLeft),d=M(h.top-r,s.minTop,s.maxTop);if(!1===this.onDrag(l,d))return;const c=M(h.right+n,s.minRight,s.maxRight),m=M(h.bottom+r,s.minBottom,s.maxBottom);this.left=l,this.top=d,this.right=c,this.bottom=m,await this.snapCheck(),this.$emit("dragging",this.left,this.top)},moveHorizontally(t){const[e,i]=y(this.grid,t,this.top,this.scale),s=M(e,this.bounds.minLeft,this.bounds.maxLeft);this.left=s,this.right=this.parentWidth-this.width-s},moveVertically(t){const[e,i]=y(this.grid,this.left,t,this.scale),s=M(i,this.bounds.minTop,this.bounds.maxTop);this.top=s,this.bottom=this.parentHeight-this.height-s},handleResize(t){const e=this.handle,i=this.scaleRatio,{TL:s,TR:h,BL:a,BR:o}=this;let{x:n,y:r}=this.getMouseCoordinate(t);!this.rotatable&&this.parent&&(n=M(n,this.parentX,this.parentX+this.parentWidth*i),r=M(r,this.parentY,this.parentY+this.parentHeight*i));let l,d,c,m,u,p,g,f,x,b=n-this.mouseClickPosition.mouseX,y=r-this.mouseClickPosition.mouseY;b/=i,y/=i;let w={},v={},z={},k={},R={},T={},S={},H={};if(e.includes("m")){switch(e){case"tm":l=b+(s.x+h.x)/2,d=y+(s.y+h.y)/2,w=a,v=s,z=o,k={x:l-w.x,y:d-w.y},R={x:v.x-w.x,y:v.y-w.y},c=(k.x*R.x+k.y*R.y)/(Math.pow(R.x,2)+Math.pow(R.y,2)),S={x:z.x-w.x,y:z.y-w.y},H={x:R.x*c,y:R.y*c};break;case"bm":l=b+(a.x+o.x)/2,d=y+(a.y+o.y)/2,w=s,v=a,z=h,k={x:l-w.x,y:d-w.y},R={x:v.x-w.x,y:v.y-w.y},c=(k.x*R.x+k.y*R.y)/(Math.pow(R.x,2)+Math.pow(R.y,2)),S={x:z.x-w.x,y:z.y-w.y},H={x:R.x*c,y:R.y*c};break;case"ml":l=b+(s.x+a.x)/2,d=y+(s.y+a.y)/2,w=o,v=a,z=h,k={x:l-w.x,y:d-w.y},R={x:v.x-w.x,y:v.y-w.y},c=(k.x*R.x+k.y*R.y)/(Math.pow(R.x,2)+Math.pow(R.y,2)),H={x:z.x-w.x,y:z.y-w.y},S={x:R.x*c,y:R.y*c};break;case"mr":l=b+(h.x+h.x)/2,d=y+(h.y+h.y)/2,w=a,v=o,z=s,k={x:l-w.x,y:d-w.y},R={x:v.x-w.x,y:v.y-w.y},c=(k.x*R.x+k.y*R.y)/(Math.pow(R.x,2)+Math.pow(R.y,2)),H={x:z.x-w.x,y:z.y-w.y},S={x:R.x*c,y:R.y*c}}p=w.x+(S.x+H.x)/2,g=w.y+(S.y+H.y)/2,f=Math.sqrt(Math.pow(S.x,2)+Math.pow(S.y,2)),x=Math.sqrt(Math.pow(H.x,2)+Math.pow(H.y,2))}else{switch(e){case"tl":l=b+s.x,d=y+s.y,w=o,v=a,z=h;break;case"tr":l=b+h.x,d=y+h.y,w=a,v=o,z=s;break;case"bl":l=b+a.x,d=y+a.y,w=h,v=s,z=o;break;case"br":l=b+o.x,d=y+o.y,w=s,v=h,z=a}k={x:l-w.x,y:d-w.y},R={x:v.x-w.x,y:v.y-w.y},T={x:z.x-w.x,y:z.y-w.y},m=(k.x*R.x+k.y*R.y)/(Math.pow(R.x,2)+Math.pow(R.y,2)),u=(k.x*T.x+k.y*T.y)/(Math.pow(T.x,2)+Math.pow(T.y,2)),S={x:R.x*m,y:R.y*m},H={x:T.x*u,y:T.y*u},p=w.x+(S.x+H.x)/2,g=w.y+(S.y+H.y)/2,f=Math.sqrt(Math.pow(S.x,2)+Math.pow(S.y,2)),x=Math.sqrt(Math.pow(H.x,2)+Math.pow(H.y,2))}this.left=p-f/2,this.top=g-x/2,f=M(f,this.minW||0,this.maxW),x=M(x,this.minH||0,this.maxH),this.parent&&(f=M(f,0,this.parentWidth),x=M(x,0,this.parentHeight)),this.lockAspectRatio&&(console.log(this.lockAspectRatio,this.aspectFactor),f/x>this.aspectFactor?f=x*this.aspectFactor:x=f/this.aspectFactor),this.width=f,this.height=x,this.$emit("resizing",this.left,this.top,this.width,this.height)},changeWidth(t){const[e,i]=y(this.grid,t,0,this.scale),s=this.parentWidth-e-this.left;let h=this.bottom;this.lockAspectRatio&&(h=this.bottom-(this.right-s)/this.aspectFactor);const a=w(this.parentWidth,this.left,s),o=v(this.parentHeight,this.top,h);this.right=s,this.bottom=h,this.width=a,this.height=o},changeHeight(t){const[e,i]=y(this.grid,0,t,this.scale),s=this.parentHeight-i-this.top;let h=this.right;this.lockAspectRatio&&(h=this.right-(this.bottom-s)*this.aspectFactor);const a=w(this.parentWidth,this.left,h),o=v(this.parentHeight,this.top,s);this.right=h,this.bottom=s,this.width=a,this.height=o},async handleUp(t){this.handle=null;const e=new Array(3).fill({display:!1,position:"",origin:"",lineLength:""}),i={vLine:[],hLine:[]};for(const a in i)i[a]=JSON.parse(JSON.stringify(e));const{x:s,y:h}=this.getMouseCoordinate(t);this.lastMouseX=s,this.lastMouseY=h,this.resizing&&(this.resizing=!1,await this.conflictCheck(),this.$emit("refLineParams",i),this.$emit("resizestop",this.left,this.top,this.width,this.height)),this.dragging&&(this.dragging=!1,await this.conflictCheck(),this.$emit("refLineParams",i),this.$emit("dragstop",this.left,this.top)),this.rotating&&(this.rotating=!1,this.$emit("rotatestop",this.rotate)),this.resetBoundsAndMouseState(),T(document.documentElement,C.move,this.move)},settingAttribute(){this.$el.setAttribute("data-is-check",`${this.isConflictCheck}`),this.$el.setAttribute("data-is-snap",`${this.snap}`)},conflictCheck(){const t=this.top,e=this.left,i=this.width,s=this.height;if(this.isConflictCheck){const h=this.$el.parentNode.childNodes;for(const a of h)if(void 0!==a.className&&!a.className.split(" ").includes(this.classNameActive)&&null!==a.getAttribute("data-is-check")&&"false"!==a.getAttribute("data-is-check")){const h=a.offsetWidth,o=a.offsetHeight,[n,r]=this.formatTransformVal(a.style.transform);(t>=r&&e>=n&&r+o>t&&n+h>e||t<=r&&e<n&&t+s>r&&e+i>n||e<=n&&t>=r&&e+i>n&&t<r+o||t<r&&e>n&&t+s>r&&e<n+h||t<=r&&e>=n&&t+s>r&&e<n+h||t>=r&&e<=n&&t<r+o&&e>n+h||t<=r&&e>=n&&t+s>r&&e<n+h||t>=r&&e<=n&&t<r+o&&e>n+h||e>=n&&t>=r&&e<n+h&&t<r+o||t>r&&e<=n&&e+i>n&&t<r+o||t<=r&&e>=n&&t+s>r&&e<n+h||t>=r&&e<=n&&t<r+o&&e+i>n)&&(this.top=this.mouseClickPosition.top,this.left=this.mouseClickPosition.left,this.width=this.mouseClickPosition.width,this.height=this.mouseClickPosition.height)}}},async snapCheck(){if(this.snap){let t=this.width,e=this.height,i=this.left,s=this.left+t,h=this.top,a=this.top+e;const o=new Array(3).fill({display:!1,position:"",origin:"",lineLength:""}),n={vLine:[],hLine:[]};for(const g in n)n[g]=JSON.parse(JSON.stringify(o));const r={value:{x:[[],[],[]],y:[[],[],[]]},display:[],position:[]},l=this.$el.parentNode.childNodes,{groupWidth:d,groupHeight:c,groupLeft:m,groupTop:u,bln:p}=await this.getActiveAll(l);p||(t=d,e=c,i=m,s=m+d,h=u,a=u+c);for(const g of l)if(void 0!==g.className&&!g.className.split(" ").includes(this.classNameActive)&&null!==g.getAttribute("data-is-snap")&&"false"!==g.getAttribute("data-is-snap")){const[o,l,d]=this.formatTransformVal(g.style.transform);if((d-this.rotate)%90==0){const d=g.offsetWidth,c=g.offsetHeight,m=o+d,u=l+c,f=Math.abs(h+e/2-(l+c/2))<=this.snapTolerance,x=Math.abs(i+t/2-(o+d/2))<=this.snapTolerance,b=Math.abs(l-a)<=this.snapTolerance,y=Math.abs(u-a)<=this.snapTolerance,w=Math.abs(l-h)<=this.snapTolerance,v=Math.abs(u-h)<=this.snapTolerance,z=Math.abs(o-s)<=this.snapTolerance,k=Math.abs(m-s)<=this.snapTolerance,R=Math.abs(o-i)<=this.snapTolerance,T=Math.abs(m-i)<=this.snapTolerance;r.display=[b,y,w,v,f,f,z,k,R,T,x,x],r.position=[l,u,l,u,l+c/2,l+c/2,o,m,o,m,o+d/2,o+d/2],p&&(b&&(this.top=l-e,this.bottom=this.parentHeight-this.top-e,r.value.y[0].push(o,m,i,s)),w&&(this.top=l,this.bottom=this.parentHeight-this.top-e,r.value.y[0].push(o,m,i,s)),y&&(this.top=u-e,this.bottom=this.parentHeight-this.top-e,r.value.y[1].push(o,m,i,s)),v&&(this.top=u,this.bottom=this.parentHeight-this.top-e,r.value.y[1].push(o,m,i,s)),z&&(this.left=o-t,this.right=this.parentWidth-this.left-t,r.value.x[0].push(l,u,h,a)),R&&(this.left=o,this.right=this.parentWidth-this.left-t,r.value.x[0].push(l,u,h,a)),k&&(this.left=m-t,this.right=this.parentWidth-this.left-t,r.value.x[1].push(l,u,h,a)),T&&(this.left=m,this.right=this.parentWidth-this.left-t,r.value.x[1].push(l,u,h,a)),f&&(this.top=l+c/2-e/2,this.bottom=this.parentHeight-this.top-e,r.value.y[2].push(o,m,i,s)),x&&(this.left=o+d/2-t/2,this.right=this.parentWidth-this.left-t,r.value.x[2].push(l,u,h,a)),this.snapBorder&&(Math.abs(this.left-0)<=this.snapTolerance&&(this.left=0,this.right=this.parentWidth-this.left-t),Math.abs(this.right-0)<=this.snapTolerance&&(this.right=0,this.left=this.parentWidth-this.width-this.right),Math.abs(this.top-0)<=this.snapTolerance&&(this.top=0,this.bottom=this.parentHeight-this.top-e),Math.abs(this.bottom-0)<=this.snapTolerance&&(this.bottom=0,this.top=this.parentHeight-this.bottom-e)));let S=this.bounds;this.left=M(this.left,S.minLeft,S.maxLeft),this.top=M(this.top,S.minTop,S.maxTop),this.right=M(this.right,S.minRight,S.maxRight),this.bottom=M(this.bottom,S.minBottom,S.maxBottom);const H=[0,1,0,1,2,2,0,1,0,1,2,2];for(let t=0;t<=H.length;t++){const e=t<6?"y":"x",i=t<6?"hLine":"vLine";if(r.display[t]){const{origin:s,length:h}=this.calcLineValues(r.value[e][H[t]]);n[i][H[t]].display=r.display[t],n[i][H[t]].position=r.position[t]+"px",n[i][H[t]].origin=s,n[i][H[t]].lineLength=h}}}}this.$emit("refLineParams",n)}},calcLineValues:t=>({length:Math.max(...t)-Math.min(...t)+"px",origin:Math.min(...t)+"px"}),async getActiveAll(t){const e=[],i=[],s=[];let h=0,a=0,o=0,n=0;for(const l of t)void 0!==l.className&&l.className.split(" ").includes(this.classNameActive)&&e.push(l);const r=e.length;if(r>1){for(const t of e){const e=t.offsetLeft,h=e+t.offsetWidth,a=t.offsetTop,o=a+t.offsetHeight;i.push(e,h),s.push(a,o)}h=Math.max(...i)-Math.min(...i),a=Math.max(...s)-Math.min(...s),o=Math.min(...i),n=Math.min(...s)}return{groupWidth:h,groupHeight:a,groupLeft:o,groupTop:n,bln:1===r}},formatTransformVal(t){let[e,i,s=0]=t.match(/[\d|\.]+/g);return void 0===i&&(i=0),[Number(e),Number(i),s]}}},$=["onMousedown","onTouchstart"],B=i(W,[["render",function(t,e,i,c,m,u){return s(),h("div",{style:r(u.style),class:n([{[i.classNameActive]:m.enabled,[i.classNameDragging]:m.dragging,[i.classNameResizing]:m.resizing,[i.classNameDraggable]:i.draggable,[i.classNameResizable]:i.resizable,[i.classNameRotating]:m.rotating,[i.classNameRotatable]:i.rotatable},i.className]),onMousedown:e[0]||(e[0]=(...t)=>u.elementMouseDown&&u.elementMouseDown(...t)),onTouchstart:e[1]||(e[1]=(...t)=>u.elementTouchDown&&u.elementTouchDown(...t))},[(s(!0),h(a,null,o(u.actualHandles,((e,a)=>(s(),h("div",{key:a,class:n([i.classNameHandle,i.classNameHandle+"-"+e]),style:r(u.handleStyle(e,a)),onMousedown:l((t=>u.handleDown(e,t)),["stop","prevent"]),onTouchstart:l((t=>u.handleTouchDown(e,t)),["stop","prevent"])},[d(t.$slots,e,{},void 0,!0)],46,$)))),128)),d(t.$slots,"default",{},void 0,!0)],38)}],["__scopeId","data-v-a7d3ae59"]]),P={class:"screen-editor"},A={class:"asider"},D=p("div",{class:"ul"},[p("li",null,"图文"),p("li",null,"单页"),p("li",null,"装饰")],-1),E={class:"container1"},F=p("p",null,"banner",-1),X={class:"config"};t("default",c({__name:"index",setup(t){const e=m("first"),i=(t,e)=>{console.log(t,e)};return(t,a)=>{const o=u("el-tab-pane"),n=u("el-tabs");return s(),h("div",P,[p("div",A,[D,g(n,{modelValue:e.value,"onUpdate:modelValue":a[0]||(a[0]=t=>e.value=t),class:"demo-tabs",onTabClick:i},{default:f((()=>[g(o,{label:"推荐",name:"second"},{default:f((()=>[x("推荐")])),_:1}),g(o,{label:"收藏",name:"third"},{default:f((()=>[x("收藏")])),_:1})])),_:1},8,["modelValue"])]),p("div",E,[g(B,{parent:!0,w:414,height:100},{default:f((()=>[F])),_:1})]),p("div",X,[g(n,{modelValue:e.value,"onUpdate:modelValue":a[1]||(a[1]=t=>e.value=t),class:"demo-tabs",onTabClick:i},{default:f((()=>[g(o,{label:"页面设置",name:"second"},{default:f((()=>[x("页面设置")])),_:1}),g(o,{label:"图层管理",name:"third"},{default:f((()=>[x("图层管理")])),_:1}),g(o,{label:"页面管理",name:"third"},{default:f((()=>[x("页面管理")])),_:1})])),_:1},8,["modelValue"])])])}}}))}}}));
